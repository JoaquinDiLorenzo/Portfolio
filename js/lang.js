// Traducciones para español e inglés
window.translations = {
  es: {
    nav: ["Inicio", "Sobre mí", "Portafolio", "Contacto"],
    home: {
      hello: "Hola, soy",
      role: "Desarrollador de Software",
      about: "más sobre mí",
      portfolio: "portafolio"
    },
    about: {
      title: "Sobre mi",
      desc: "Apasionado por la programación y el desarrollo de software. Desde 2020 trabajo en proyectos reales: desde sitios web en producción hasta aplicaciones de análisis de datos con Python, pandas y matplotlib. Curso 3er año de Licenciatura en Sistemas en la UNLP y participo en el equipo de programación del Club de Finanzas UNLP, donde combino análisis de datos y economía. Trabajo con Python (Django, análisis de datos), Java (POO, patrones de diseño) y bases de datos como PostgreSQL. Me motiva resolver problemas y transformar ideas en soluciones funcionales.",
      skills: "Habilidades",
      download: "descargar cv",
      contact: "contactame"
    },
    portfolio: {
      title: "Proyectos recientes",
      view: "Ver Proyecto",
      tech: "Tecnologias Utilizadas",
      github: "GitHub",
      more: "Más Informacion y Demo",
      online: "Ver Online",
      items: [
        {
          desc: "Sitio web institucional desarrollado para el Club de Finanzas UNLP.  Permite la gestión de miembros, eventos y la publicación de artículos sobre finanzas, economía e inversiones.  Incluye panel de administración seguro, autenticación y base de datos relacional.",
          general: [
            "Django · PostgreSQL · HTML · CSS · Bootstrap",
            null,
            "https://www.clubdefinanzasunlp.com/"
          ]
        },
        {
          desc: "Proyecto realizado para la materia 'Ingeniera de Software 2' para la gestión integral de alquiler de maquinarias.  Incluye sistema de reservas, control de stock, penalizaciones por entregas tardías o roturas, integración con Mercado Pago para cobros,etc.",
          general: [
            "Django · PostgreSQL · Google Maps API · Mercado Pago API - Bootstrap",
            "https://github.com/FedericoKesselman/alquil.ar",
            "https://www.linkedin.com/posts/joaquin-di-lorenzo-9306ba337_alquilar-sitio-web-desarrollado-para-activity-7357910641027739648-nLtb?utm_source=share&utm_medium=member_desktop&rcm=ACoAAFSku7QBgLrTP1tuq9PgLrCYSV6EREJ-O2s"
          ]
        },
        {
          desc: "Sistema de recomendación de películas basado en machine learning, que utiliza datos de la plataforma Letterboxd.  Procesa valoraciones y preferencias del usuario para sugerir películas personalizadas. También cuenta con una sección llamada 'Movie Night' la cual cruza los datos de dos personas y recomienda peliculas.",
          general: [
            "Python · Pandas · Scikit-learn · Jupyter Notebook",
            "https://github.com/baltumenvielle/letterboxdrecommender",
            "https://www.linkedin.com/posts/joaquin-di-lorenzo-9306ba337_ai-machinelearning-webscraping-activity-7317964037915303936-D6fn?utm_source=share&utm_medium=member_desktop&rcm=ACoAAFSku7QBgLrTP1tuq9PgLrCYSV6EREJ-O2s",
            "https://letterboxdrecommender.streamlit.app/"
          ]
        },
        {
          desc: "Herramienta para generar automáticamente (en formato txt) la estructura de carpetas y archivos base para proyectos de software, permitiendo personalizar plantillas según el tipo de desarrollo. Ideal para contextualizar modelos de IA sobre la estructura de tu proyecto.",
          general: [
            "Python · CLI · OS Library",
            "https://github.com/JoaquinDiLorenzo/project_tree",
            "https://www.linkedin.com/posts/joaquin-di-lorenzo-9306ba337_buenos-d%C3%ADas-recientemente-decid%C3%AD-retomar-activity-7320163726278500352-3_V0?utm_source=share&utm_medium=member_desktop&rcm=ACoAAFSku7QBgLrTP1tuq9PgLrCYSV6EREJ-O2s",
            "https://projectree.streamlit.app/"
          ]
        }
      ]
    },
    contact: {
      title: "contactame",
      name: "Nombre",
      email: "Email",
      message: "Mensaje",
      send: "enviar mensaje",
      emailTitle: "Email",
      social: "Redes Sociales"
    },
    alert: "¡Gracias por contactarme, te responderé lo antes posible!"
  },
  en: {
    nav: ["Home", "About", "Portfolio", "Contact"],
    home: {
      hello: "Hi, I'm",
      role: "Software Developer",
      about: "more about me",
      portfolio: "portfolio"
    },
    about: {
      title: "About me",
      desc: "Passionate about programming and software development. Since 2020 I have worked on real projects: from production websites to data analysis applications with Python, pandas, and matplotlib. I am in my 3rd year of Systems Engineering at UNLP and participate in the programming team of Club de Finanzas UNLP, where I combine data analysis and economics. I work with Python (Django, data analysis), Java (OOP, design patterns), and databases like PostgreSQL. I am motivated by solving problems and turning ideas into functional solutions.",
      skills: "Skills",
      download: "download cv",
      contact: "contact me"
    },
    portfolio: {
      title: "Recent Projects",
      view: "View Project",
      tech: "Technologies Used",
      github: "GitHub",
      more: "More Info & Demo",
      online: "View Online",
      items: [
        {
          desc: "Institutional website developed for Club de Finanzas UNLP.  Allows management of members, events, and publication of articles on finance, economics, and investments.  Includes secure admin panel, authentication, and relational database.",
          general: [
            "Django · PostgreSQL · HTML · CSS · Bootstrap",
            null,
            "https://www.clubdefinanzasunlp.com/"
          ]
        },
        {
          desc: "Project for the course 'Software Engineering 2' for comprehensive machinery rental management.  Includes reservation system, stock control, penalties for late returns or damages, integration with Mercado Pago for payments, etc.",
          general: [
            "Django · PostgreSQL · Google Maps API · Mercado Pago API - Bootstrap",
            "https://github.com/FedericoKesselman/alquil.ar",
            "https://www.linkedin.com/posts/joaquin-di-lorenzo-9306ba337_alquilar-sitio-web-desarrollado-para-activity-7357910641027739648-nLtb?utm_source=share&utm_medium=member_desktop&rcm=ACoAAFSku7QBgLrTP1tuq9PgLrCYSV6EREJ-O2s"
          ]
        },
        {
          desc: "Movie recommendation system based on machine learning, using data from the Letterboxd platform.  Processes user ratings and preferences to suggest personalized movies. Also features a 'Movie Night' section that combines data from two people and recommends movies.",
          general: [
            "Python · Pandas · Scikit-learn · Jupyter Notebook",
            "https://github.com/baltumenvielle/letterboxdrecommender",
            "https://www.linkedin.com/posts/joaquin-di-lorenzo-9306ba337_ai-machinelearning-webscraping-activity-7317964037915303936-D6fn?utm_source=share&utm_medium=member_desktop&rcm=ACoAAFSku7QBgLrTP1tuq9PgLrCYSV6EREJ-O2s",
            "https://letterboxdrecommender.streamlit.app/"
          ]
        },
        {
          desc: "Tool to automatically generate (in txt format) the folder and base file structure for software projects, allowing you to customize templates according to the type of development. Ideal for contextualizing AI models about your project's structure.",
          general: [
            "Python · CLI · OS Library",
            "https://github.com/JoaquinDiLorenzo/project_tree",
            "https://www.linkedin.com/posts/joaquin-di-lorenzo-9306ba337_buenos-d%C3%ADas-recientemente-decid%C3%AD-retomar-activity-7320163726278500352-3_V0?utm_source=share&utm_medium=member_desktop&rcm=ACoAAFSku7QBgLrTP1tuq9PgLrCYSV6EREJ-O2s",
            "https://projectree.streamlit.app/"
          ]
        }
      ]
    },
    contact: {
      title: "contact me",
      name: "Name",
      email: "Email",
      message: "Message",
      send: "send message",
      emailTitle: "Email",
      social: "Social Networks"
    },
    alert: "Thank you for contacting me, I will answer you as soon as possible!"
  }
};

function setLanguage(lang) {
  // Navegación
  const navItems = document.querySelectorAll('.nav-item.link-item');
  translations[lang].nav.forEach((txt, i) => {
    if(navItems[i]) navItems[i].textContent = txt;
  });
  // Home
  document.querySelector('.home-text p').textContent = translations[lang].home.hello;
  document.querySelector('.home-text h2').textContent = translations[lang].home.role;
  document.querySelector('.home-text a.btn.link-item').textContent = translations[lang].home.about;
  document.querySelectorAll('.home-text a.btn.link-item')[1].textContent = translations[lang].home.portfolio;
  // About
  document.querySelector('.about-section .section-title h2').textContent = translations[lang].about.title;
  document.querySelector('.about-text p').textContent = translations[lang].about.desc;
  document.querySelector('.about-text h3').textContent = translations[lang].about.skills;
  document.querySelector('.about-buttons a.btn').textContent = translations[lang].about.download;
  document.querySelectorAll('.about-buttons a.btn')[1].textContent = translations[lang].about.contact;
  // Portfolio
  document.querySelector('.portfolio-section .section-title h2').textContent = translations[lang].portfolio.title;
  document.querySelectorAll('.portfolio-item-title').forEach((el, i) => {
    // No traducimos nombres de proyectos
  });
  document.querySelectorAll('.view-project-btn').forEach(btn => btn.textContent = translations[lang].portfolio.view);
  // Descripción y general-info de cada portfolio item
  document.querySelectorAll('.portfolio-item').forEach((item, idx) => {
    // Descripción
    const desc = item.querySelector('.portfolio-item-details .description p');
    if(desc && translations[lang].portfolio.items[idx]?.desc) {
      desc.textContent = translations[lang].portfolio.items[idx].desc;
    }
    // General info
    const generalLis = item.querySelectorAll('.portfolio-item-details .general-info li');
    const generalData = translations[lang].portfolio.items[idx]?.general || [];
    // Limpiar todos los li para el primer item si está en inglés
    if(idx === 0 && lang === 'en') {
      // Solo mostrar el li de 'View Online'
      generalLis.forEach((li, i) => {
        if(i === 0) {
          li.innerHTML = `${translations[lang].portfolio.tech} - <span>${generalData[0]}</span>`;
        } else if(i === 1) {
          li.innerHTML = `${translations[lang].portfolio.online} - <span><a href="${generalData[2]}" target="_blank">${generalData[2]}</a></span>`;
        } else {
          li.style.display = 'none';
        }
      });
    } else {
      generalLis.forEach((li, i) => {
        li.style.display = '';
        if(i === 0 && generalData[0]) {
          li.innerHTML = `${translations[lang].portfolio.tech} - <span>${generalData[0]}</span>`;
        }
        if(i === 1 && generalData[1]) {
          li.innerHTML = `${translations[lang].portfolio.github} - <span><a href="${generalData[1]}" target="_blank">${generalData[1]}</a></span>`;
        }
        if(i === 2 && generalData[2]) {
          li.innerHTML = `${translations[lang].portfolio.more} - <span><a href="${generalData[2]}" target="_blank">${lang === 'es' ? 'Ver publicacion de Linkedin' : 'View Linkedin Post'}</a></span>`;
        }
        if(i === 3 && generalData[3]) {
          li.innerHTML = `${translations[lang].portfolio.online} - <span><a href="${generalData[3]}" target="_blank">${generalData[3]}</a></span>`;
        }
      });
    }
  });
  // Contact
  document.querySelector('.contact-section .section-title h2').textContent = translations[lang].contact.title;
  document.querySelector('input[name="_name"]').placeholder = translations[lang].contact.name;
  document.querySelector('input[name="_email"]').placeholder = translations[lang].contact.email;
  document.querySelector('textarea[name="_message"]').placeholder = translations[lang].contact.message;
  document.querySelector('.submit-btn .btn').textContent = translations[lang].contact.send;
  document.querySelectorAll('.contact-info-item h3')[0].textContent = translations[lang].contact.emailTitle;
  document.querySelectorAll('.contact-info-item h3')[1].textContent = translations[lang].contact.social;
}

// Botón de idioma integrado en el header
window.addEventListener('DOMContentLoaded', () => {
  let lang = 'es';
  const btn = document.getElementById('lang-btn');
  if (!btn) return;
  btn.addEventListener('click', () => {
    lang = lang === 'es' ? 'en' : 'es';
    btn.textContent = lang === 'es' ? 'EN' : 'ES';
    setLanguage(lang);
  });
});

// Cambiar alert del form
window.setLanguage = setLanguage;
